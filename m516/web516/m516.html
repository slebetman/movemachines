<htm>
<head>
	<link rel="stylesheet" type="text/css" href="m516.css">
</head>
<body>
	<span id="ram-label">RAM</span>
	<label for="load-ram" id="load-ram-label">Load</label>
	<input type="file" id="load-ram" accept=".516">
	<div id="ram"></div>
	<div id="rtl">
		<label id="label-ibus">Internal Data Bus</label>
		<label id="label-abus">Address Bus</label>
		<label id="label-dbus">Data Bus</label>
		<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1000 700" id="graphics">
			<defs>
				<marker id="arrowend" markerWidth="3" markerHeight="3" refX="0" refY="1.5" orient="auto">
					<polygon points="0 0, 3 1.5, 0 3" />
				</marker>
				<marker id="arrowstart" markerWidth="3" markerHeight="3" refX="3" refY="1.5" orient="auto">
					<polygon points="3 0, 0 1.5, 3 3" />
				</marker>
			</defs>
			<polyline id="ret_pc" stroke-width="2"
				marker-end="url(#arrowend)"
				points="146,140 265,140 265,178" 
			/>
			<polyline id="address_ibus" stroke-width="2"
				marker-end="url(#arrowend)" marker-start="url(#arrowstart)"
				points="116,205 116,220" 
			/>

			<polyline id="ibus" stroke-width="5"
				points="80,230 600,230" 
			/>
			<polyline id="dbus" stroke-width="5"
				marker-end="url(#arrowend)" marker-start="url(#arrowstart)"
				points="20,420 600,420" 
			/>
			<polyline id="abus" stroke-width="5"
				marker-start="url(#arrowstart)"
				points="20,55 116,55 116,132" 
			/>

			<polyline id="ret_ibus" stroke-width="2"
				marker-end="url(#arrowend)" marker-start="url(#arrowstart)"
				points="265,210 265,220" 
			/>
			<polyline id="acu_ibus" stroke-width="2"
				marker-end="url(#arrowend)" marker-start="url(#arrowstart)"
				points="440,210 440,220" 
			/>
			<polyline id="acu_alu" stroke-width="2"
				marker-end="url(#arrowend)" marker-start="url(#arrowstart)"
				points="440,170 440,177" 
			/>
			<polyline id="alu_ibus" stroke-width="2"
				marker-end="url(#arrowend)"
				points="530,230 530,170" 
			/>

			<polyline id="m0_ibus" stroke-width="2"
				marker-end="url(#arrowend)" marker-start="url(#arrowstart)"
				points="250,240 250,252" 
			/>
			<polyline id="m8_ibus" stroke-width="2"
				marker-end="url(#arrowend)" marker-start="url(#arrowstart)"
				points="352,240 352,252" 
			/>
			<polyline id="m16_ibus" stroke-width="2"
				marker-end="url(#arrowend)" marker-start="url(#arrowstart)"
				points="454,240 454,252" 
			/>
			<polyline id="m24_ibus" stroke-width="2"
				marker-end="url(#arrowend)" marker-start="url(#arrowstart)"
				points="556,240 556,252" 
			/>
			<polyline id="m0_dbus" stroke-width="2"
				marker-end="url(#arrowend)" marker-start="url(#arrowstart)"
				points="250,400 250,410" 
			/>
			<polyline id="m8_dbus" stroke-width="2"
				marker-end="url(#arrowend)" marker-start="url(#arrowstart)"
				points="352,400 352,410" 
			/>
			<polyline id="m16_dbus" stroke-width="2"
				marker-end="url(#arrowend)" marker-start="url(#arrowstart)"
				points="454,400 454,410" 
			/>
			<polyline id="m24_dbus" stroke-width="2"
				marker-end="url(#arrowend)" marker-start="url(#arrowstart)"
				points="556,400 556,410" 
			/>

			<polyline id="stack_ibus" stroke-width="2"
				marker-end="url(#arrowend)" marker-start="url(#arrowstart)"
				points="116,240 116,252" 
			/>
			<polyline id="stack_dbus" stroke-width="2"
				marker-end="url(#arrowend)" marker-start="url(#arrowstart)"
				points="116,368 116,410" 
			/>
		</svg>
		<div id="alu">
			<h1>ALU</h1>
			<pre>
				one/add:01
				nil/sub:02
				all/and:03
				rsh/or:04
				inv/xor:28
			</pre>
		</div>
		<div id="address_decoding">
			<div>pc:2f<span class="reg" id="pc">0x0000</span></div>
			<div>*a:05<span class="reg pak" id="a_ptr">0x0000</span></div>
			<div>*b:2c<span class="reg" id="b_ptr">0x0000</span></div>
			<div>*m:33<span class="reg" id="m_ptr">0x0000</span></div>
		</div>
		<div id="ret-div">ret:32<span class="reg" id="ret">0x0000</span></div>
		<div id="acu-div">acu:00<span class="reg pak" id="acu">0x0000</span></div>
		<div id="data_access">
			<div>a:- <span class="reg pak" id="a_minus">0x0000</span></div>
			<div>a:06<span class="reg pak" id="a">0x0000</span></div>
			<div>a:+ <span class="reg pak" id="a_plus">0x0000</span></div>
			<div>b:- <span class="reg" id="b_minus">0x0000</span></div>
			<div>b:2d<span class="reg" id="b">0x0000</span></div>
			<div>b:+ <span class="reg" id="b_plus">0x0000</span></div>
		</div>
		<div id="memory_window">
			<div class="col">
				<div>m0 <span class="reg pak" id="m0">0x0000</span></div>
				<div>m1 <span class="reg pak" id="m1">0x0000</span></div>
				<div>m2 <span class="reg pak" id="m2">0x0000</span></div>
				<div>m3 <span class="reg pak" id="m3">0x0000</span></div>
				<div>m4 <span class="reg pak" id="m4">0x0000</span></div>
				<div>m5 <span class="reg pak" id="m5">0x0000</span></div>
				<div>m6 <span class="reg pak" id="m6">0x0000</span></div>
				<div>m7 <span class="reg pak" id="m7">0x0000</span></div>
			</div>

			<div class="col">
				<div>m8 <span class="reg" id="m8">0x0000</span></div>
				<div>m9 <span class="reg" id="m9">0x0000</span></div>
				<div>m10<span class="reg" id="m10">0x0000</span></div>
				<div>m11<span class="reg" id="m11">0x0000</span></div>
				<div>m12<span class="reg" id="m12">0x0000</span></div>
				<div>m13<span class="reg" id="m13">0x0000</span></div>
				<div>m14<span class="reg" id="m14">0x0000</span></div>
				<div>m15<span class="reg" id="m15">0x0000</span></div>
			</div>

			<div class="col">
				<div>m16<span class="reg" id="m16">0x0000</span></div>
				<div>m17<span class="reg" id="m17">0x0000</span></div>
				<div>m18<span class="reg" id="m18">0x0000</span></div>
				<div>m19<span class="reg" id="m19">0x0000</span></div>
				<div>m20<span class="reg" id="m20">0x0000</span></div>
				<div>m21<span class="reg" id="m21">0x0000</span></div>
				<div>m22<span class="reg" id="m22">0x0000</span></div>
				<div>m23<span class="reg" id="m23">0x0000</span></div>
			</div>

			<div class="col">
				<div>m24<span class="reg" id="m24">0x0000</span></div>
				<div>m25<span class="reg" id="m25">0x0000</span></div>
				<div>m26<span class="reg" id="m26">0x0000</span></div>
				<div>m27<span class="reg" id="m27">0x0000</span></div>
				<div>m28<span class="reg" id="m28">0x0000</span></div>
				<div>m29<span class="reg" id="m29">0x0000</span></div>
				<div>m30<span class="reg" id="m30">0x0000</span></div>
				<div>m31<span class="reg" id="m31">0x0000</span></div>
			</div>
		</div>
		<div id="ui">
			<button id="step">Step [↓]</button>
			<button id="run">Run [→]</button>
			<button id="stop">Stop [space]</button>
            Speed: <select id="speedup"></select>
		</div>
		<label id="disassembly"></label>
		<label id="mhz"></label>
	</div>
	<script src="./util.js"></script>
	<script src="./array-stride.js"></script>
	<script src="../../lib/hex.js"></script>
	<script src="./registers.js"></script>
	<script src="./cpu.js"></script>
	<script src="./asm.js"></script>
	<script src="./m516.js"></script>
	<script src="./file-loader.js"></script>
	<script src="./devices/util.js"></script>
	<script src="./devices/led7seg.js"></script>
</body>
</htm>
